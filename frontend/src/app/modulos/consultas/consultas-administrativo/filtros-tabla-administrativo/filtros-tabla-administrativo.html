<div class="space-y-6">

    <!--  T铆tulo del bloque -->
    <div class="flex flex-col items-center text-center">
        <h2 class="text-xl font-semibold text-[#004D00]">
            GESTIN DE USUARIOS (ADMINISTRATIVO)
        </h2>
        <p class="text-gray-600 font-roboto mt-1">
            Consulta y analiza la distribuci贸n de usuarios registrados en la aplicaci贸n.
        </p>
    </div>

    <!--  Filtros PRINCIPALES -->
    <div class="bg-[#E1E1E1] p-4 sm:p-6 rounded-2xl shadow-md space-y-6">

        <!-- GRID RESPONSIVE -->
        <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-6">

            <!--  Identificaci贸n -->
            <div class="flex flex-col">
                <label class="font-oswald text-lg text-gray-800 mb-1">
                    Identificaci贸n del usuario:
                </label>
                <input type="text" [(ngModel)]="filtroIdentificacion" placeholder="Ingrese el n煤mero de documento"
                    class="rounded-full bg-white px-4 py-2 w-full focus:ring-2 focus:ring-[#7CE54F] outline-none" />
            </div>

            <!--  Tipo de usuario -->
            <div class="flex flex-col">
                <label class="font-oswald text-lg text-gray-800 mb-1">
                    Tipo de usuario:
                </label>
                <select [(ngModel)]="tipoUsuarioSeleccionado"
                    class="rounded-full bg-white px-4 py-2 w-full focus:ring-2 focus:ring-[#7CE54F] outline-none">
                    <option value="">Todos los tipos</option>
                    <option value="Administrador">Administrador</option>
                    <option value="Asistente-admon">Asistente-admon</option>
                    <option value="Asistente-salud-deportiva">Asistente-salud-deportiva</option>
                    <option value="Usuario">Usuario</option>
                </select>
            </div>

            <!--  Tipo de informe -->
            <div class="flex flex-col">
                <label class="font-oswald text-lg text-gray-800 mb-1">
                    Tipo de informe:
                </label>
                <div>
                    <select [(ngModel)]="tipoInformeSeleccionado"
                        class="rounded-full bg-white px-4 py-2 w-full focus:ring-2 focus:ring-[#7CE54F] outline-none"
                        [ngClass]="{'border-red-500 border-2': mostrarError && !tipoInformeSeleccionado}">
                        <option value="">Seleccione el tipo de informe</option>
                        <option value="cantidad_estados">Cantidad por estados</option>
                        <option value="cantidad_sexos">Cantidad por sexo</option>
                        <option value="cantidad_por_tipo_usuario">Cantidad de usuarios seg煤n su tipo</option>
                        <option value="listado_detallado">Listado detallado de usuarios</option>
                    </select>
                    @if (mostrarError && !tipoInformeSeleccionado) {
                    <small class="text-red-500 flex  ">Campo obligatorio</small>}
                </div>

            </div>

        </div>

        <!--  Botones -->
        <div class="flex flex-wrap justify-center sm:justify-end gap-3 mt-4">
            <button (click)="consultarAdministrativo()"
                class="bg-[#004D00] text-white font-oswald px-4 py-2 rounded-full hover:bg-[#007000] transition">
                CONSULTAR
            </button>

            <button (click)="limpiarFiltros()"
                class="bg-gray-600 text-white font-oswald px-4 py-2 rounded-full hover:bg-gray-700 transition">
                LIMPIAR
            </button>
        </div>

    </div>


    <!--  Tabla de resultados -->

    <!--  TABLA DETALLADA (solo si se eligi贸 listado_detallado) -->
    @if (tipoInformeSeleccionado === 'listado_detallado' && usuariosFiltrados.length > 0) {

    <div class="overflow-x-auto border-4 border-zinc-400 rounded-2xl shadow-md mt-6">
        <table class="min-w-full border-collapse text-sm font-roboto">
            <thead class="bg-zinc-400 text-zinc-900 font-oswald">
                <tr class="text-center text-lg font-semibold">
                    <th class="px-4 py-2">Identificaci贸n</th>
                    <th class="px-4 py-2">Nombres</th>
                    <th class="px-4 py-2">Apellidos</th>
                    <th class="px-4 py-2">Tipo de usuario</th>
                    <th class="px-4 py-2">Sexo</th>
                    <th class="px-4 py-2">Estado</th>
                </tr>
            </thead>

            <tbody class="divide-y divide-zinc-300">
                @for (u of usuariosFiltrados; track u.IDENTIFICACION) {
                <tr class="text-center text-base hover:bg-[#E1E1E1] transition">
                    <td class="px-4 py-2">{{ u.IDENTIFICACION }}</td>
                    <td class="px-4 py-2">{{ u.NOMBRES }}</td>
                    <td class="px-4 py-2">{{ u.APELLIDOS }}</td>
                    <td class="px-4 py-2">{{ u.TIPO_USUARIO_NOMBRE }}</td>
                    <td class="px-4 py-2">{{ u.SEXO }}</td>
                    <td class="px-4 py-2">{{ u.ESTADO }}</td>
                </tr>
                }
            </tbody>
        </table>
    </div>

    <div class="flex justify-end mt-4">
        <button (click)="generarInformeAdministrativo()"
            class="bg-black text-white px-6 py-2 rounded-full hover:bg-gray-800 transition font-oswald">
            GENERAR INFORME
        </button>
    </div>

    }

    <!--  TABLA ESTADSTICA (para informes de cantidades) -->
    @else if (tipoInformeSeleccionado !== 'listado_detallado' && usuariosFiltrados.length > 0) {

    <div class="overflow-x-auto border-4 border-zinc-400 rounded-2xl shadow-md mt-6">
        <table class="min-w-full border-collapse text-sm font-roboto">
            <thead class="bg-zinc-400 text-zinc-900 font-oswald">
                <tr class="text-center text-lg font-semibold">
                    <th class="px-4 py-2">Descripci贸n</th>
                    <th class="px-4 py-2">Valor</th>
                </tr>
            </thead>

            <tbody class="divide-y divide-zinc-300">
                @for (item of usuariosFiltrados; track item.ETIQUETA) {
                <tr class="text-center text-base hover:bg-[#E1E1E1] transition">
                    <td class="px-4 py-2">{{ item.ETIQUETA }}</td>
                    <td class="px-4 py-2 font-semibold">{{ item.VALOR }}</td>
                </tr>
                }
            </tbody>
        </table>
    </div>

    <div class="flex justify-end mt-4">
        <button (click)="generarInformeAdministrativo()"
            class="bg-black text-white px-6 py-2 rounded-full hover:bg-gray-800 transition font-oswald">
            GENERAR INFORME
        </button>
    </div>

    }

    <!--  MENSAJE SIN RESULTADOS -->
    @else {
    <div class="text-center text-gray-500 italic font-roboto mt-8">
        No se encontraron usuarios para los filtros seleccionados.
    </div>
    }


</div>