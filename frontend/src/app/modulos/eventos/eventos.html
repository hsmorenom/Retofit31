<div class="w-full sm:w-[90%] lg:w-[70%] mx-auto p-6 space-y-6">

    <h2 class="text-black text-center font-semibold text-2xl sm:text-3xl font-oswald m-4">
        EVENTOS</h2>

    <!-- ðŸ” Filtro de bÃºsqueda -->
    <div class="flex flex-wrap justify-center items-center gap-2 mb-4">
        <button (click)="abrirAgregarEvento()"
            class="bg-black text-white px-4 py-2 rounded-full hover:bg-gray-800 font-oswald w-full sm:w-auto">
            AGREGAR EVENTO
        </button>

        <div class="relative flex-1 max-w-[500px] min-w-[200px]">
            <div class="absolute inset-y-0 left-0 flex items-center ">
                <div
                    class="bg-gray-600 text-black font-bold flex items-center justify-center w-10 h-10 rounded-full font-oswald">
                    <i class="fas fa-search text-white"></i>
                </div>
            </div>
            <input type="text" placeholder="Buscar por nombre, fecha, lugar o instructor del evento"
                [(ngModel)]="filtroTexto" (input)="filtrarEventos()"
                class="border border-gray-300 rounded-full pl-13 pr-4 py-2 w-full font-bold text-zinc-400 focus:outline-none focus:ring-2 focus:ring-zinc-600 bg-zinc-200" />
        </div>

        <button (click)="limpiarFiltro()"
            class="bg-gray-600 text-white px-4 py-2 rounded-full hover:bg-gray-700 font-oswald w-full sm:w-auto">
            LIMPIAR
        </button>
    </div>


    <!-- ðŸ§© SecciÃ³n dinÃ¡mica -->
    @if (mostrarAgregarEvento) {
    <div class="bg-white rounded-lg shadow-lg p-6 border border-gray-300">

        <div class="flex flex-1 gap-4 ">

            <div class="w-full">
                <h3 class="text-[#004D00] text-center font-semibold text-lg sm:text-3xl pl-6 font-oswald m-4">
                    AGREGAR EVENTO
                </h3>
            </div>

        </div>
        <div>
            <app-agregar-evento (cerrar)="cerrarAgregarEvento()"></app-agregar-evento>
        </div>

    </div>
    }
    @else if (mostrarEditarEvento) {
    <div class="bg-white rounded-lg shadow-lg p-6 border border-gray-300">
        <div class="flex justify-between items-center mb-4">
            <div class="w-full">
                <h3 class="text-[#004D00] text-center font-semibold text- sm:text-3xl pl-6 font-oswald m-4">EDITAR
                    EVENTO</h3>
            </div>

        </div>

        <app-editar-evento [evento]="eventoSeleccionado" (cerrar)="cerrarEditarEvento()"></app-editar-evento>
    </div>
    }

    @else if (mostrarQrEvento) {
    <div class="bg-white rounded-lg shadow-lg p-6 border border-gray-300">
        <div class="flex justify-between items-center mb-4">
            <div class="w-full">
                <h3 class="text-[#004D00] text-center font-semibold text- sm:text-3xl pl-6 font-oswald m-4">QR EVENTO
                </h3>
            </div>
        </div>

        <app-qr-evento [evento]="qrEvento " (cerrar)="cerrarQrEvento()"></app-qr-evento>
    </div>
    }
    @else {
    <!-- ðŸ“‹ Tabla de eventos -->
    <div class="max-h-[1000px] overflow-y-auto overflow-x-auto m-4 mx-auto w-full border-4 border-zinc-400 rounded-lg">
        <table class="min-w-full border-collapse">
            <thead class="bg-zinc-400 text-zinc-800 font-oswald ">
                <tr>
                    <th class="py-2 px-4 border-b">ID</th>
                    <th class="py-2 px-4 border-b">Evento</th>
                    <th class="py-2 px-4 border-b">Fecha</th>
                    <th class="py-2 px-4 border-b">Hora inicial</th>
                    <th class="py-2 px-4 border-b">Hora final</th>
                    <th class="py-2 px-4 border-b">Instructor</th>
                    <th class="py-2 px-4 border-b">Lugar</th>
                    <th class="py-2 px-4 border-b">Observaciones</th>
                    <th class="py-2 px-4 border-b">Creado por</th>


                    <th class="py-2 px-4 border-b text-center">Acciones</th>
                </tr>
            </thead>

            <tbody class="divide-y divide-zinc-400">
                @for (e of eventosFiltrados; track e.id_evento; let i = $index) {
                <tr class="bg-white text-center hover:bg-[#E1E1E1]">
                    <td class="py-2 px-4 border-zinc-400">{{ e.ID_EVENTOS }}</td>
                    <td class="py-2 px-4 border-zinc-400">{{ e.NOMBRE_EVENTO}}</td>
                    <td class="py-2 px-4 border-zinc-400">{{ e.FECHA_ACTIVIDAD }}</td>
                    <td class="py-2 px-4 border-zinc-400">{{ e.HORA_INICIO }}</td>
                    <td class="py-2 px-4 border-zinc-400">{{ e.HORA_FIN }}</td>
                    <td class="py-2 px-4 border-zinc-400">{{ e.INSTRUCTOR }}</td>
                    <td class="py-2 px-4 border-zinc-400">{{ e.LUGAR_DE_ACTIVIDAD }}</td>
                    <td class="py-2 px-4 border-zinc-400">{{ e.OBSERVACIONES }}</td>
                    <td class="py-2 px-4 border-zinc-400">{{ e.CREADO_POR}}</td>
                    <td class="py-2 px-4 border-zinc-400 flex justify-center gap-2">
                        <button (click)="abrirEditarEvento(e)"
                            class=" hover:bg-[#7ce54b] hover:text-white text-black p-2 rounded-full mr-2">
                            <i class="fas fa-pencil text-2xl"></i>
                        </button>

                        <button (click)="abrirQrEvento(e)"
                            class=" hover:bg-[#7ce54b]  hover:text-white text-black p-2 rounded-full mr-2">
                            <i class="fas fa-eye text-2xl"></i>
                        </button>

                        <button (click)="eliminarEvento(e.ID_EVENTOS)"
                            class=" hover:bg-[#7ce54b]  hover:text-white text-black p-2 rounded-full mr-2">
                            <i class="fas fa-trash text-2xl"></i>
                        </button>
                    </td>
                </tr>
                }
            </tbody>
        </table>
    </div>
    }
</div>